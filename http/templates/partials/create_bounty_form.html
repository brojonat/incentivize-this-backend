{{define "create-bounty-form"}}
<!-- Form -->
<form
  hx-post="/forms/create-bounty"
  hx-target="#create-bounty-form-container"
  hx-swap="innerHTML"
  @htmx:before-request="submittingBounty = true"
  @htmx:after-request="submittingBounty = false; if($event.detail.successful) handleBountyFormSuccess()"
>
  <!-- Requirements -->
  <div class="filter-section">
    <div
      style="
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.75rem;
      "
    >
      <label class="filter-label" style="margin: 0">Requirements</label>
      <button
        type="button"
        @click="hardenRequirements()"
        class="ai-harden-button"
        :disabled="hardeningInProgress"
        :style="hardeningInProgress ? 'opacity: 0.7 !important; cursor: wait !important;' : ''"
        @mouseenter="if (!hardeningInProgress) { $el.style.transform = 'translateY(-2px) scale(1.02)'; $el.style.boxShadow = '0 6px 20px rgba(139, 92, 246, 0.6)'; }"
        @mouseleave="$el.style.transform = 'translateY(0) scale(1)'; $el.style.boxShadow = '0 4px 12px rgba(139, 92, 246, 0.4)'"
      >
        <span
          x-show="!hardeningInProgress"
          style="
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            white-space: nowrap;
          "
          >âœ¨ Harden with AI</span
        >
        <span
          x-show="hardeningInProgress"
          style="
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
          "
        >
          <svg
            style="
              animation: spin 1s linear infinite;
              width: 14px;
              height: 14px;
              flex-shrink: 0;
              display: inline-block;
              vertical-align: middle;
            "
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
              stroke-opacity="0.25"
            />
            <path
              d="M12 2a10 10 0 0 1 10 10"
              stroke="currentColor"
              stroke-width="4"
              stroke-linecap="round"
            />
          </svg>
          <span>Processing...</span>
        </span>
      </button>
    </div>
    <textarea
      class="filter-input"
      name="requirements"
      placeholder="Describe what content you want created..."
      x-model="newBounty.requirements"
      rows="4"
      required
      style="width: 100%; resize: vertical; font-family: inherit"
    ></textarea>
  </div>

  <!-- Reward and Count (Single Row) -->
  <div class="filter-section">
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem">
      <div>
        <label class="filter-label">Reward (USD)</label>
        <input
          type="number"
          name="reward_per_post"
          inputmode="decimal"
          class="filter-input"
          placeholder="0.00"
          step="0.01"
          min="0"
          required
          x-model="newBounty.rewardPerPost"
          style="width: 100%"
        />
      </div>
      <div>
        <label class="filter-label">Quantity</label>
        <input
          type="number"
          name="number_of_bounties"
          inputmode="numeric"
          class="filter-input"
          placeholder="1"
          step="1"
          min="1"
          required
          x-model="newBounty.numberOfBounties"
          style="width: 100%"
        />
      </div>
    </div>
  </div>

  <!-- Duration -->
  <div class="filter-section">
    <label class="filter-label">Duration (Days)</label>
    <select
      class="filter-input"
      name="duration"
      x-model="newBounty.duration"
      style="width: 100%"
    >
      <option value="1">1 day</option>
      <option value="7">7 days</option>
      <option value="14">14 days</option>
      <option value="30" selected>30 days</option>
      <option value="60">60 days</option>
      <option value="90">90 days</option>
      <option value="180">180 days</option>
    </select>
  </div>

  <!-- Cost Breakdown -->
  <div
    style="
      background-color: rgba(160, 202, 252, 0.1);
      border: 1px solid rgba(160, 202, 252, 0.3);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1.5rem;
    "
  >
    <p
      style="
        font-size: 0.875rem;
        color: var(--text-primary);
        margin: 0 0 0.75rem 0;
        font-weight: 600;
      "
    >
      Cost Breakdown
    </p>
    <div
      style="
        display: flex;
        justify-content: space-between;
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
      "
    >
      <span>Subtotal:</span>
      <span x-text="'$' + totalCost.subtotal.toFixed(2)"></span>
    </div>
    <div
      style="
        display: flex;
        justify-content: space-between;
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
      "
    >
      <span>Platform Fee:</span>
      <span x-text="'$' + totalCost.fee.toFixed(2)"></span>
    </div>
    <div
      style="
        display: flex;
        justify-content: space-between;
        font-size: 1rem;
        color: var(--text-primary);
        font-weight: 600;
        padding-top: 0.5rem;
        border-top: 1px solid rgba(160, 202, 252, 0.3);
      "
    >
      <span>Total:</span>
      <span x-text="'$' + totalCost.total.toFixed(2)"></span>
    </div>
  </div>

  <!-- Form Response Area -->
  <div id="form-response" style="margin-bottom: 1rem"></div>

  <!-- Actions -->
  <div class="filter-actions">
    <button
      type="button"
      class="filter-button filter-button-secondary"
      @click="createBountyModalOpen = false"
    >
      Cancel
    </button>
    <button
      type="submit"
      class="filter-button filter-button-primary"
      :disabled="submittingBounty"
      :style="submittingBounty ? 'opacity: 0.7 !important;' : ''"
    >
      <span
        x-show="!submittingBounty"
        style="
          display: inline-flex;
          align-items: center;
          gap: 0.4rem;
          white-space: nowrap;
        "
        >Create Bounty</span
      >
      <span
        x-show="submittingBounty"
        style="
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          white-space: nowrap;
        "
      >
        <svg
          style="
            animation: spin 1s linear infinite;
            width: 14px;
            height: 14px;
            flex-shrink: 0;
            display: inline-block;
            vertical-align: middle;
          "
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
            stroke-opacity="0.25"
          />
          <path
            d="M12 2a10 10 0 0 1 10 10"
            stroke="currentColor"
            stroke-width="4"
            stroke-linecap="round"
          />
        </svg>
        <span>Creating...</span>
      </span>
    </button>
  </div>
</form>
{{end}}

